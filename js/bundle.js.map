{"version":3,"sources":["webpack:///webpack/bootstrap 1d745a6f2decc3f58e9b","webpack:///./js/bitboard/index.js","webpack:///./js/pieces/constants.js","webpack:///./js/pieces/movements/dir_constants.js","webpack:///./js/pieces/index.js","webpack:///./js/pieces/movements/masks.js","webpack:///./js/pieces/movements/slide_moves.js","webpack:///./js/bitboard/bitboard.js","webpack:///./js/pieces/movements/step_move.js","webpack:///./js/ui/constants.js","webpack:///./js/app.js","webpack:///./js/ui/index.js","webpack:///./js/position/index.js","webpack:///./js/bitboard/utils.js","webpack:///./js/bitboard/masks.js","webpack:///./js/move/index.js","webpack:///./js/move/constants.js","webpack:///./js/pieces/pawns.js","webpack:///./js/pieces/knight.js","webpack:///./js/pieces/bishop.js","webpack:///./js/pieces/rook.js","webpack:///./js/pieces/queen.js","webpack:///./js/pieces/king.js","webpack:///./js/pieces/conversions.js","webpack:///./js/position/utils/array_conversions.js","webpack:///./js/ai/index.js","webpack:///./js/ui/util.js"],"names":["BitBoard","require","Masks","module","exports","BBMasks","Colors","WHITE","BLACK","Types","PAWNS","KNIGHTS","BISHOPS","ROOKS","QUEENS","KINGS","PieceTypeLetters","PieceTypeHTML","DIRS","Constants","Pawns","Knight","Bishop","Rook","Queen","King","PieceConv","Dirs","PieceTypes","stepMove","generateStepBitBoards","dirs","res","pos","initial","posRes","addMove","currRes","dir","or","fromPos","reduce","push","KNIGHT_MOVES","KING_MOVES","SLIDE_MOVES","moves","colIdx","rowIdx","diagIdx","antiDiagIdx","Math","floor","NORTH","COLS","and","NORTH_OF_ROW","SOUTH","SOUTH_OF_ROW","EAST","ROWS","EAST_OF_COL","WEST","WEST_OF_COL","NOEA","DIAGS","SOWE","NOWE","ANTI_DIAGS","SOEA","isPosRay","findUnblocked","occupied","posBB","dirBB","blocking","blockingPos","isZero","bitScanForward","bitScanReverse","xor","horizVert","notOwnPieces","diag","Utils","low","high","other","numBits","newLowBits","newHighBits","count","int32","popCount32","pow","bitScanForward32","Boolean","bitScanReverse32","cb","clearLeastSigBit32","row","posVal","console","log","length","setBit","positions","forEach","colNum","rowNum","posMax","startPos","noSo","eaWe","shiftLeft","shiftRight","ColsFiles","FilesCols","file","col","RowsRanks","RanksRows","rank","Selectors","BOARD_ID","PIECE_CLASS","SQUARE_CLASS","RANK_CLASS","FILE_CLASS","UI","$","document","ready","ui","run","Position","AI","Util","position","playerColor","ai","currMoves","generateLegalMoves","makePlayerMove","bind","drawBoard","playNextTurn","updatePieces","turn","setupPlayerMove","aiMove","newRow","append","fileRank","newSquare","squareColor","isDarkSquare","addClass","table","newRankRow","generateSquare","prepend","generateFileHeader","remove","removeClass","pieceTypes","Object","values","pieces","newPiece","pieceType","forEach1Bit","hasSetBit","fileRankFromPos","makeMove","toPos","selectedMove","filter","move","getFrom","getTo","movesData","map","getData","moveFromTos","moveData","from","to","fromFileRank","toFileRank","droppedPieceSource","selectedMoves","keys","draggable","mouseenter","mouseleave","droppable","drop","event","parent","attr","posFromFileRank","Move","MoveTypes","pieceSetsToArray","pieceSetsFromArray","prevMoves","castleRights","epBB","prevStates","setTurn","opp","getOtherColor","color","addPawnMoves","addNormalMoves","addKingMoves","pseudoMoves","generatePseudoMoves","isLegal","legals","pseudoMove","testMove","testsLegal","pawnsPos","getColorPieceSet","notOccupied","getOccupied","not","pawnSinglePushes","singlePush","addPawnMoveSet","pawnDoublePushes","doublePush","oppPositions","pawnLeftAttacks","attacksLeft","pawnRightAttacks","attacksRight","newPositions","shiftAmt","isCapture","isDblPush","captured","DBL_PPUSH","EP_CAPT","getPieceAt","PROMO_MASKS","addPromos","NORMAL","NPROMO","BPROMO","RPROMO","QPROMO","promoType","getNotOccupiedBy","knightsPos","knightMoves","addNormalMoveSet","bishopsPos","bishopMoves","rooksPos","rookMoves","queenPos","queenMoves","kingPos","normalMoves","addCastleMoves","newPos","newMove","captType","turnCastleRights","getCastleRights","INIT_POS","canCastle","CSTL_QUEEN","CSTL_KING","types","idx","type","addPrevState","adjustCastleRights","execMoveType","swapTurn","captPieceType","clearPieceAt","isPromo","movePiece","undo","setPieceAt","isCastle","isLegalCastle","inCheck","castleType","isAttacked","oppColor","pawns","prevMove","pop","reverseMoveType","prevState","clearCastleRightsMask","clearCastlePos","state","epPos","capturedPos","clearBit","boardType","render","boardArr","rowStr","int","generateMSBTable","max","log2","mostSigBitTable","FULL_BOARD","cols","fromCol","rows","fromRow","diags","upperRightDiag","antiDiags","upperLeftDiag","bb","piece","captPiece","val","getType","getPiece","getCaptPiece","includes","typesArr","INIT_MASKS","value","oppPieces","onePush","castleSlide","popCount","pieceToLetter","toUpperCase","letterToColor","letter","letterToType","toLowerCase","xx","WP","WN","WB","WR","WQ","WK","BP","BN","BB","BR","BQ","BK","defaultBoardArr","createEmptyBoardArr","array","chosen","random","split"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1d745a6f2decc3f58e9b","const BitBoard = require('./bitboard.js');\nconst Masks = require('./masks.js');\n\nmodule.exports = {\n  BitBoard,\n  BBMasks: Masks,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/bitboard/index.js","const Colors = {\n  WHITE: 0,\n  BLACK: 1\n};\n\nconst Types = {\n  PAWNS: 2,\n  KNIGHTS: 3,\n  BISHOPS: 4,\n  ROOKS: 5,\n  QUEENS: 6,\n  KINGS: 7\n};\n\nconst PieceTypeLetters = {\n  [Types.PAWNS]: 'p',\n  [Types.KNIGHTS]: 'n',\n  [Types.BISHOPS]: 'b',\n  [Types.ROOKS]: 'r',\n  [Types.QUEENS]: 'q',\n  [Types.KINGS]: 'k',\n};\n\nconst PieceTypeHTML = {\n  [Types.PAWNS]: '&#9823;',\n  [Types.KNIGHTS]: '&#9822;',\n  [Types.BISHOPS]: '&#9821;',\n  [Types.ROOKS]: '&#9820;',\n  [Types.QUEENS]: '&#9819;',\n  [Types.KINGS]: '&#9818;',\n};\n\nmodule.exports = { Types, Colors, PieceTypeLetters, PieceTypeHTML };\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/constants.js","const DIRS = {\n  'NORTH': 0,\n  'SOUTH': 1,\n  'EAST': 2,\n  'WEST': 3,\n  'NOEA': 4,\n  'NOWE': 5,\n  'SOEA': 6,\n  'SOWE': 7\n};\n\nmodule.exports = DIRS;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/movements/dir_constants.js","// const { WhitePawns, BlackPawns } = require('./pawns.js');\nconst Constants = require('./constants.js');\nconst Pawns = require('./pawns.js');\nconst Knight = require('./knight.js');\nconst Bishop = require('./bishop.js');\nconst Rook = require('./rook.js');\nconst Queen = require('./queen.js');\nconst King = require('./king.js');\nconst PieceConv = require('./conversions.js');\nconst Dirs = require('./movements/dir_constants.js');\n\nmodule.exports = {\n  PieceTypes: Constants.Types,\n  Colors: Constants.Colors,\n  PieceTypeHTML: Constants.PieceTypeHTML,\n  Dirs,\n  Pawns,\n  Knight,\n  Bishop,\n  Rook,\n  Queen,\n  King,\n  PieceConv\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/index.js","const { BitBoard, BBMasks } = require('../../bitboard');\nconst Dirs = require('./dir_constants.js');\nconst stepMove = require('./step_move.js');\n\nfunction generateStepBitBoards(dirs) {\n  const res = [];\n  let pos = 0;\n  let initial;\n  let posRes;\n\n  const addMove = (currRes, dir) => {\n    return currRes.or(stepMove(initial, dir[0], dir[1]));\n  };\n\n  while (pos < 64) {\n    initial = BitBoard.fromPos(pos);\n    posRes = dirs.reduce((currRes, dir) => addMove(currRes, dir), new BitBoard());\n    res.push(posRes);\n    pos++;\n  }\n\n  return res;\n}\n\nconst KNIGHT_MOVES = function() {\n  const dirs = [[1, 2], [1, -2],\n                [2, 1], [2, -1],\n                [-1, 2], [-1, -2],\n                [-2, 1], [-2, -1]];\n\n  return generateStepBitBoards(dirs);\n}();\n\nconst KING_MOVES = function() {\n  const dirs = [[1, 0], [1, 1],\n                [1, -1],[-1, 0],\n                [-1, 1], [-1, -1],\n                [0, -1], [0, 1]];\n\n  return generateStepBitBoards(dirs);\n}();\n\nconst SLIDE_MOVES = function() {\n  let pos = 0;\n  const res = [];\n  let moves;\n  let colIdx;\n  let rowIdx;\n  let diagIdx;\n  let antiDiagIdx;\n\n  while (pos < 64) {\n    moves = {};\n    rowIdx = Math.floor(pos / 8);\n    colIdx = pos % 8;\n    diagIdx = (pos < rowIdx * 9) ? (pos % 9) - 2 : (pos % 9) + 7;\n    if (pos === 63) {\n      antiDiagIdx = 14;\n    } else {\n      antiDiagIdx = (pos < (rowIdx + 1) * 7) ? (pos % 7) : (pos % 7) + 7;\n    }\n    moves[Dirs.NORTH] = BBMasks.COLS[colIdx].and(BBMasks.NORTH_OF_ROW[rowIdx]);\n    moves[Dirs.SOUTH] = BBMasks.COLS[colIdx].and(BBMasks.SOUTH_OF_ROW[rowIdx]);\n    moves[Dirs.EAST] = BBMasks.ROWS[rowIdx].and(BBMasks.EAST_OF_COL[colIdx]);\n    moves[Dirs.WEST] = BBMasks.ROWS[rowIdx].and(BBMasks.WEST_OF_COL[colIdx]);\n    moves[Dirs.NOEA] = BBMasks.DIAGS[diagIdx].and(BBMasks.NORTH_OF_ROW[rowIdx]);\n    moves[Dirs.SOWE] = BBMasks.DIAGS[diagIdx].and(BBMasks.SOUTH_OF_ROW[rowIdx]);\n    moves[Dirs.NOWE] = BBMasks.ANTI_DIAGS[antiDiagIdx].and(BBMasks.NORTH_OF_ROW[rowIdx]);\n    moves[Dirs.SOEA] = BBMasks.ANTI_DIAGS[antiDiagIdx].and(BBMasks.SOUTH_OF_ROW[rowIdx]);\n    res.push(moves);\n    pos++;\n  }\n\n  return res;\n}();\n\nmodule.exports = {\n  KNIGHT_MOVES,\n  KING_MOVES,\n  SLIDE_MOVES,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/movements/masks.js","const { BitBoard } = require('../../bitboard');\nconst { SLIDE_MOVES } = require('./masks.js');\nconst Dirs = require('./dir_constants.js');\n\nconst isPosRay = {\n  [Dirs.NORTH]: true,\n  [Dirs.EAST]: true,\n  [Dirs.NOEA]: true,\n  [Dirs.NOWE]: true,\n  [Dirs.SOUTH]: false,\n  [Dirs.WEST]: false,\n  [Dirs.SOEA]: false,\n  [Dirs.SOWE]: false\n};\n\nfunction findUnblocked(pos, occupied, dir) {\n  const posBB = new BitBoard();\n  const dirBB = SLIDE_MOVES[pos][dir];\n  const blocking = dirBB.and(occupied);\n  let blockingPos;\n\n  if (blocking.isZero()) {\n    return dirBB;\n  } else {\n    blockingPos = isPosRay[dir] ? blocking.bitScanForward() : blocking.bitScanReverse();\n    return dirBB.xor(SLIDE_MOVES[blockingPos][dir]);\n  }\n}\n\nfunction horizVert(pos, occupied, notOwnPieces) {\n  return [Dirs.NORTH, Dirs.SOUTH, Dirs.EAST, Dirs.WEST].reduce((res, dir) => {\n    return res.or(findUnblocked(pos, occupied, dir));\n  }, new BitBoard()).and(notOwnPieces);\n}\n\nfunction diag(pos, occupied, notOwnPieces) {\n  return [Dirs.NOEA, Dirs.NOWE, Dirs.SOEA, Dirs.SOWE].reduce((res, dir) => {\n    return res.or(findUnblocked(pos, occupied, dir));\n  }, new BitBoard()).and(notOwnPieces);\n}\n\nmodule.exports = {\n  horizVert,\n  diag\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/movements/slide_moves.js","const Utils = require('./utils.js');\n// A standard 8x8 chess board can be represented by a 64bit integer (bitboard),\n// in which a 1 means the position is occupied, a 0 means it's empty\n\n// We use several of these bitboards to represent a chess position\n// for example, the current set of pieces is represented by a bitboard\n// for each piece type and color\n\n// Since Javascript doesn't support bitwise operations for 64bit integers,\n// we implement most of those operations here, separating the 64bit int\n// into its low 32bit and high 32bit components\n\n//56 57 58 59 60 61 62 63\n//48 49 50 51 52 53 54 55  ^\n//40 41 42 43 44 45 46 47  |\n//32 33 34 35 36 37 38 39 HIGH\n//24 25 26 27 28 29 30 31 LOW\n//16 17 18 19 20 21 22 23  |\n// 8  9 10 11 12 13 14 15  v\n// 0  1  2  3  4  5  6  7\n\nclass BitBoard {\n  constructor(low, high) {\n    this.low = (low || 0) >>> 0;\n    this.high = (high || 0) >>> 0;\n  }\n\n  and(other) {\n    return new BitBoard(this.low & other.low, this.high & other.high);\n  }\n\n  or(other) {\n    return new BitBoard(this.low | other.low, this.high | other.high);\n  }\n\n  xor(other) {\n    return new BitBoard(this.low ^ other.low, this.high ^ other.high);\n  }\n\n  not() {\n    return new BitBoard(~this.low, ~this.high);\n  }\n\n  equals(other) {\n    return (this.low === other.low && this.high === other.high);\n  }\n\n  greaterThan(other) {\n    return (this.high > other.high || this.low > other.low);\n  }\n\n  lessThan(other) {\n    return (this.high < other.high || this.low < other.low);\n  }\n\n  isZero() {\n    return (this.high === 0 && this.low === 0);\n  }\n\n  shiftRight(numBits) {\n    let newLowBits, newHighBits;\n\n    if (numBits <= 0) {\n      return new BitBoard(this.low, this.high);\n    } else if (numBits > 63) {\n      return new BitBoard();\n    } else if (numBits >= 32) {\n      newLowBits = this.high >>> (numBits - 32);\n      newHighBits = 0;\n    } else {\n      newLowBits = (this.low >>> numBits) | (this.high << (32 - numBits));\n      newHighBits = this.high >>> numBits;\n    }\n\n    return new BitBoard(newLowBits, newHighBits);\n  }\n\n  shiftLeft(numBits) {\n    let newLowBits, newHighBits;\n\n    if (numBits <= 0) {\n      return new BitBoard(this.low, this.high);\n    } else if (numBits > 63) {\n      return new BitBoard();\n    } else if (numBits >= 32) {\n      newLowBits = 0;\n      newHighBits = (this.low << (numBits - 32)) >>> 0;\n    } else {\n      newLowBits = (this.low << numBits) >>> 0;\n      newHighBits =  ((this.low >>> (32 - numBits)) | (this.high << numBits)) >>> 0;\n    }\n\n    return new BitBoard(newLowBits, newHighBits);\n  }\n\n  popCount() {\n      return [this.low, this.high].reduce((count, int32) => {\n        return count + Utils.popCount32(int32);\n      }, 0);\n  }\n\n  setBit(pos) {\n    if (pos >= 32 && pos < 64) {\n      this.high = (this.high | Math.pow(2, pos - 32)) >>> 0;\n    } else if (pos >= 0 && pos < 32) {\n      this.low = (this.low | Math.pow(2, pos)) >>> 0;\n    }\n  }\n\n  clearBit(pos) {\n    if (pos >= 32 && pos < 64) {\n      this.high = (this.high & (~Math.pow(2, pos - 32))) >>> 0;\n    } else if (pos >= 0 && pos < 32) {\n      this.low = (this.low & (~Math.pow(2, pos))) >>> 0;\n    }\n  }\n\n  bitScanForward() {\n    if (this.low) {\n      return Utils.bitScanForward32(this.low);\n    } else if (this.high) {\n      return Utils.bitScanForward32(this.high) + 32;\n    } else {\n      return null;\n    }\n  }\n\n  hasSetBit(pos) {\n    if (pos < 32) {\n      return Boolean(this.low & Math.pow(2, pos));\n    } else {\n      return Boolean(this.high & Math.pow(2, pos - 32));\n    }\n  }\n\n  bitScanReverse() {\n    if (this.high) {\n      return Utils.bitScanReverse32(this.high) + 32;\n    } else if (this.low) {\n      return Utils.bitScanReverse32(this.low);\n    } else {\n      return null;\n    }\n  }\n\n  forEach1Bit(cb) {\n    let newLowBits = this.low;\n    let newHighBits = this.high;\n\n    while (newLowBits) {\n      cb(Utils.bitScanForward32(newLowBits));\n      newLowBits = Utils.clearLeastSigBit32(newLowBits);\n    }\n\n    while (newHighBits) {\n      cb(Utils.bitScanForward32(newHighBits) + 32);\n      newHighBits = Utils.clearLeastSigBit32(newHighBits);\n    }\n  }\n\n  static fromPos(pos) {\n    const res = new BitBoard();\n    res.setBit(pos);\n\n    return res;\n  }\n\n  static fromPositions(positions) {\n    const res = new BitBoard();\n\n    positions.forEach((pos) => {\n      res.setBit(pos);\n    });\n\n    return res;\n  }\n\n  static fromCol(colNum) {\n    const res = new BitBoard();\n    if (colNum < 0 || colNum > 7) { return res; }\n    let pos = colNum;\n\n    while (pos < 64) {\n      res.setBit(pos);\n      pos += 8;\n    }\n\n    return res;\n  }\n\n  static fromRow(rowNum) {\n    const res = new BitBoard();\n    if (rowNum < 0 || rowNum > 7) { return res; }\n\n    let pos = rowNum * 8;\n    let posMax = pos + 7;\n\n    while (pos <= posMax) {\n      res.setBit(pos);\n      pos++;\n    }\n\n    return res;\n  }\n\n  static upperRightDiag(startPos) {\n    const res = BitBoard.fromPos(startPos);\n    if (startPos < 0 || startPos > 63) { return res; }\n    let pos = startPos + 9;\n\n    while (pos < 64 && pos % 8 !== 0) {\n      res.setBit(pos);\n      pos += 9;\n    }\n\n    return res;\n  }\n\n  static upperLeftDiag(startPos) {\n    const res = new BitBoard();\n    if (startPos < 0 || startPos > 63) { return res; }\n    let pos = startPos;\n\n    while (pos < 64 && pos % 8 !== 0) {\n      res.setBit(pos);\n      pos += 7;\n    }\n\n    if (pos < 64) {\n      res.setBit(pos);\n    }\n\n    return res;\n  }\n\n  render() {\n    let row = '';\n    let pow = 63;\n    let posVal;\n    console.log('------');\n    while (pow >= 32) {\n      posVal = (Math.pow(2, pow - 32) & this.high) === 0 ? '0' : '1';\n      row = posVal + row;\n      if (row.length === 8) {\n        console.log(row);\n        row = '';\n      }\n      pow--;\n    }\n\n    while (pow >= 0) {\n      posVal = (Math.pow(2, pow) & this.low) === 0 ? '0' : '1';\n      row = posVal + row;\n      if (row.length === 8) {\n        console.log(row);\n        row = '';\n      }\n      pow--;\n    }\n    console.log('------');\n  }\n}\n\n\nmodule.exports = BitBoard;\n\n\n\n// WEBPACK FOOTER //\n// ./js/bitboard/bitboard.js","const { BitBoard, BBMasks } = require('../../bitboard');\n\nfunction stepMove(initial, noSo, eaWe) {\n  let positions = initial;\n\n  if (noSo > 0) {\n    positions = positions.shiftLeft(noSo * 8);\n  } else if (noSo < 0){\n    positions = positions.shiftRight(noSo * -8);\n  }\n\n  if (eaWe > 0) {\n    positions = positions.shiftLeft(eaWe).and(BBMasks.EAST_OF_COL[eaWe - 1]);\n  } else if (eaWe < 0){\n    positions = positions.shiftRight(-eaWe).and(BBMasks.WEST_OF_COL[eaWe + 8]);\n  }\n\n  return positions;\n}\n\nmodule.exports = stepMove;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/movements/step_move.js","const ColsFiles = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\n\nconst FilesCols = function() {\n  return ColsFiles.reduce((res, file, col) => {\n    res[file] = col;\n    return res;\n  }, {});\n}();\n\nconst RowsRanks = ['1', '2', '3', '4', '5', '6', '7', '8'];\n\nconst RanksRows = function() {\n  return RowsRanks.reduce((res, rank, row) => {\n    res[rank] = row;\n    return res;\n  }, {});\n}();\n\nconst Selectors = {\n  BOARD_ID: \"#board\",\n  PIECE_CLASS: 'piece',\n  SQUARE_CLASS: 'square',\n  RANK_CLASS: 'rank',\n  FILE_CLASS: 'file'\n};\n\n// const PieceCharsToHTML = []{\n//   'k': '&#9812;',\n//   'q':\n//\n// };\n\nmodule.exports = { ColsFiles, FilesCols, RowsRanks, RanksRows, Selectors };\n\n\n\n// WEBPACK FOOTER //\n// ./js/ui/constants.js","const UI = require('./ui');\n\n$(document).ready(function() {\n  const ui = new UI();\n  ui.run();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","const Position = require('../position');\nconst AI = require('../ai');\nconst { PieceTypes, Colors, PieceTypeHTML } = require('../pieces');\nconst Util = require('./util.js');\nconst { ColsFiles, FilesCols,\n        RowsRanks, RanksRows,\n        Selectors } = require('./constants.js');\n\nclass UI {\n  constructor() {\n    this.position = new Position();\n    this.playerColor = Colors.BLACK;\n    this.ai = new AI();\n    this.currMoves = this.position.generateLegalMoves();\n    this.makePlayerMove = this.makePlayerMove.bind(this);\n  }\n\n  run() {\n    this.drawBoard();\n    this.playNextTurn();\n  }\n\n  playNextTurn() {\n    this.updatePieces();\n    this.currMoves = this.position.generateLegalMoves();\n    if (this.currMoves.length === 0) {\n      return;\n    }\n\n    if (this.position.turn === this.playerColor) {\n      this.setupPlayerMove();\n    } else {\n      this.aiMove();\n    }\n\n  }\n\n  reset() {\n\n  }\n\n  generateFileHeader() {\n    const newRow = $('<tr></tr>');\n    newRow.append(`<th>`);\n    ColsFiles.forEach((file) => {\n      newRow.append(`<th class=\"file\">${file}</th>`);\n    });\n    newRow.append(`<th>`);\n\n    return newRow;\n  }\n\n  generateSquare(file, rank) {\n    const fileRank = file + rank;\n\n    const newSquare = $(`<td id=\"${fileRank}\"></td>`);\n\n    const squareColor = Util.isDarkSquare(fileRank) ? 'dark' : 'light';\n    newSquare.addClass(squareColor + \" square\");\n\n    return newSquare;\n  }\n\n  drawBoard() {\n    const table = $('<table>');\n\n    let newRankRow;\n    RowsRanks.forEach((rank) => {\n      newRankRow = $('<tr>');\n      newRankRow.append(`<th class=\"rank\">${rank}</th>`);\n      ColsFiles.forEach((file) => {\n        newRankRow.append(this.generateSquare(file, rank));\n      });\n      newRankRow.append(`<th class=\"rank\">${rank}</th>`);\n      table.prepend(newRankRow);\n    });\n\n    table.prepend(this.generateFileHeader());\n    table.append(this.generateFileHeader());\n    $('#board').append(table);\n  }\n\n  updatePieces() {\n    $('.piece').remove();\n    $('.square').removeClass('ui-droppable ui-draggable can-move-to');\n    const pieceTypes = Object.values(PieceTypes);\n    const pieces = this.position.pieces;\n    let fileRank;\n    let newPiece;\n\n    pieceTypes.forEach((pieceType) => {\n      pieces[pieceType].forEach1Bit((pos) => {\n        newPiece = $(`<div class=\"piece\">${PieceTypeHTML[pieceType]}<div>`);\n        if (pieces[Colors.WHITE].hasSetBit(pos)) {\n          newPiece.addClass('white');\n        } else {\n          newPiece.addClass('black');\n        }\n        fileRank = Util.fileRankFromPos(pos);\n        $(`#${fileRank}`).append(newPiece);\n      });\n    });\n  }\n\n  aiMove() {\n    this.ai.makeMove(this.position, this.currMoves);\n    this.playNextTurn();\n  }\n\n  pieceMoveEvent() {\n\n  }\n\n  makePlayerMove(fromPos, toPos) {\n    console.log('make move called');\n    const selectedMove = this.currMoves.filter((move) => {\n      return move.getFrom() === fromPos &&\n             move.getTo() === toPos;\n    })[0];\n    if (selectedMove) {\n      this.position.makeMove(selectedMove);\n      this.playNextTurn();\n    } else {\n      this.updatePieces();\n      this.setupPlayerMove();\n    }\n  }\n\n  setupPlayerMove() {\n    const moves = this.position.generateLegalMoves();\n    const movesData = moves.map((move) => move.getData());\n    const moveFromTos = {};\n\n    movesData.forEach((moveData) => {\n      moveFromTos[moveData.from] = moveFromTos[moveData.from] || [];\n      moveFromTos[moveData.from].push(moveData.to);\n    });\n\n    let fromFileRank;\n    let toFileRank;\n    let droppedPieceSource;\n    let selectedMoves;\n\n    Object.keys(moveFromTos).forEach((fromPos) => {\n      fromFileRank = Util.fileRankFromPos(fromPos);\n      $(`#${fromFileRank} .piece`).draggable();\n      $(`#${fromFileRank} .piece`).mouseenter(() => {\n        console.log('in here');\n        moveFromTos[fromPos].forEach( (toPos) => {\n          $(`#${Util.fileRankFromPos(toPos)}`).addClass('can-move-to');\n        });\n      });\n\n      $(`#${fromFileRank} .piece`).mouseleave(() => {\n        moveFromTos[fromPos].forEach( (toPos) => {\n          $(`#${Util.fileRankFromPos(toPos)}`).removeClass('can-move-to');\n        });\n      });\n\n      moveFromTos[fromPos].forEach( (toPos) => {\n        $(`#${Util.fileRankFromPos(toPos)}`).droppable({\n          drop: (event, ui) => {\n            droppedPieceSource = $(ui.draggable).parent().attr('id');\n            this.makePlayerMove(Util.posFromFileRank(droppedPieceSource), toPos);\n          }\n        });\n      });\n    });\n  }\n}\n\nmodule.exports = UI;\n\n\n\n// WEBPACK FOOTER //\n// ./js/ui/index.js","const { BitBoard, BBMasks } = require('../bitboard');\n\nconst { Move, MoveTypes } = require('../move');\n\nconst { Pawns, Knight, Bishop,\n        Rook, King, Queen,\n        PieceTypes, Colors, Dirs } = require('../pieces');\n\nconst { pieceSetsToArray,\n        pieceSetsFromArray } = require('./utils/array_conversions.js');\n\nclass Position {\n  constructor(pieces = pieceSetsFromArray(), turn = Colors.WHITE, prevMoves = []) {\n    this.pieces = pieces;\n    this.prevMoves = prevMoves;\n\n    // castling rights represented by 4bit int\n    // in the following order (left bit to right):\n    // bKing bQueen wKing wQueen\n    this.castleRights = 0xf;\n\n    // the en passant BB will either be empty\n    // or have one position marked that indicates\n    // the destination of an en passant attack\n    this.epBB = new BitBoard();\n\n    // holds previous state info (castling rights, en passant)\n    // for move reversal purposes\n    this.prevStates = [];\n\n    this.setTurn(turn);\n  }\n\n  setTurn(turn, opp) {\n    this.turn = turn;\n    this.opp = opp || this.getOtherColor(turn);\n  }\n\n  swapTurn() {\n    this.setTurn(this.opp, this.turn);\n  }\n\n  getOtherColor(color) {\n    return color ^ Colors.BLACK;\n  }\n\n  // generates all pseudo legal moves, ie moves that may put the king\n  // in check but are otherwise legal\n  // why do this: our ai move search generates all moves for a position\n  // and then considers each move individually. some of those moves\n  // will not be considered due to pruning cutoffs, so it's more efficient\n  // to only check for full legality of moves that we actually consider\n  generatePseudoMoves() {\n    const moves = [];\n    this.addPawnMoves(moves);\n    this.addNormalMoves(moves);\n    this.addKingMoves(moves);\n\n    return moves;\n  }\n\n  // generates moves with a filter for whether the move puts the king in check\n  // mainly used to determine checkmate or stalemate\n  generateLegalMoves() {\n    const pseudoMoves = this.generatePseudoMoves();\n    let moveData;\n    let isLegal;\n\n    const legals = [];\n    return pseudoMoves.filter((pseudoMove) => {\n      moveData = pseudoMove.getData();\n\n      this.testMove(moveData, (testsLegal) => {\n        isLegal = testsLegal;\n        return true;\n      });\n\n      return isLegal;\n    });\n  }\n\n  // inserts pawn moves into the moves array\n  addPawnMoves(moves) {\n    const pawnsPos = this.getColorPieceSet(this.turn, PieceTypes.PAWNS);\n    const notOccupied = this.getOccupied().not();\n\n    const pawnSinglePushes = Pawns.singlePush(this.turn, pawnsPos, notOccupied);\n    this.addPawnMoveSet(pawnSinglePushes, 8 * Pawns.DIRS[this.turn], moves);\n\n    const pawnDoublePushes = Pawns.doublePush(this.turn, pawnsPos, notOccupied);\n    this.addPawnMoveSet(pawnDoublePushes, 16 * Pawns.DIRS[this.turn], moves, false, true);\n\n    let oppPositions = this.pieces[this.opp].or(this.epBB);\n\n    const pawnLeftAttacks = Pawns.attacksLeft(this.turn, pawnsPos, oppPositions);\n    this.addPawnMoveSet(pawnLeftAttacks, 7 * Pawns.DIRS[this.turn], moves, true);\n\n    const pawnRightAttacks = Pawns.attacksRight(this.turn, pawnsPos, oppPositions);\n    this.addPawnMoveSet(pawnRightAttacks, 9 * Pawns.DIRS[this.turn], moves, true);\n  }\n\n  // takes a new position set for pawns and adds each corresponding move\n  // to the moves array, with special handling for en passants, promotions and double pushes\n\n  // note: unlike other pieces, we map pawn movements from the set of all existing pawns\n  // rather than each pawn individually, so the function takes a shift amount to determine\n  // the location of the individual pawn that moved to a new position\n  addPawnMoveSet(newPositions, shiftAmt, moves, isCapture, isDblPush) {\n    let from;\n    let captured = null;\n\n    newPositions.forEach1Bit((pos) => {\n      from = pos - shiftAmt;\n      if (isDblPush) {\n        moves.push(new Move(from, pos, MoveTypes.DBL_PPUSH, PieceTypes.PAWNS));\n      } else if (isCapture && this.epBB.hasSetBit(pos)) {\n        moves.push(new Move(from, pos, MoveTypes.EP_CAPT, PieceTypes.PAWNS));\n      } else {\n        if (isCapture) { captured = this.getPieceAt(pos); }\n\n        if (Pawns.PROMO_MASKS[this.turn].hasSetBit(pos)) {\n          this.addPromos(from, pos, moves, captured);\n        } else {\n          moves.push(new Move(from, pos, MoveTypes.NORMAL, PieceTypes.PAWNS, captured));\n        }\n      }\n    });\n  }\n\n  // adds a move to the moves array for each possible promotion type\n\n  // side note: I was curious about why you'd ever promote to rook or bishop\n  // and the reason is if promoting to a queen results in stalemate\n  addPromos(from, to, moves, captured) {\n    [MoveTypes.NPROMO, MoveTypes.BPROMO,\n     MoveTypes.RPROMO, MoveTypes.QPROMO].forEach((promoType) => {\n       moves.push(new Move(from, to, promoType, PieceTypes.PAWNS, captured));\n     });\n  }\n\n  // adds moves to the moves array for all pieces that don't\n  // have 'special' moves, ie not pawns or kings\n  addNormalMoves(moves) {\n    const occupied = this.getOccupied();\n    const notOwnPieces = this.getNotOccupiedBy(this.turn);\n\n    const knightsPos = this.getColorPieceSet(this.turn, PieceTypes.KNIGHTS);\n    let knightMoves;\n    knightsPos.forEach1Bit((pos) => {\n      knightMoves = Knight.moves(pos, notOwnPieces);\n      this.addNormalMoveSet(knightMoves, pos, PieceTypes.KNIGHTS, moves);\n    });\n\n    const bishopsPos = this.getColorPieceSet(this.turn, PieceTypes.BISHOPS);\n    let bishopMoves;\n    bishopsPos.forEach1Bit((pos) => {\n      bishopMoves = Bishop.moves(pos, occupied, notOwnPieces);\n      this.addNormalMoveSet(bishopMoves, pos, PieceTypes.BISHOPS, moves);\n    });\n\n    const rooksPos = this.getColorPieceSet(this.turn, PieceTypes.ROOKS);\n    let rookMoves;\n    rooksPos.forEach1Bit((pos) => {\n      rookMoves = Rook.moves(pos, occupied, notOwnPieces);\n      this.addNormalMoveSet(rookMoves, pos, PieceTypes.ROOKS, moves);\n    });\n\n    const queenPos = this.getColorPieceSet(this.turn, PieceTypes.QUEENS).bitScanForward();\n    if (queenPos !== null) {\n      const queenMoves = Queen.moves(queenPos, occupied, notOwnPieces);\n      this.addNormalMoveSet(queenMoves, queenPos, PieceTypes.QUEENS, moves);\n    }\n  }\n\n  // adds available king moves to the moves array\n  addKingMoves(moves) {\n      const notOwnPieces = this.getNotOccupiedBy(this.turn);\n      const kingPos = this.getColorPieceSet(this.turn, PieceTypes.KINGS).bitScanForward();\n\n      // for testing purposes...\n      if (kingPos === null) { return; }\n\n      const normalMoves = King.moves(kingPos, notOwnPieces);\n      this.addNormalMoveSet(normalMoves, kingPos, PieceTypes.KINGS, moves);\n\n      this.addCastleMoves(moves);\n  }\n\n  // takes a BB of possible new positions for a single\n  // piece and adds each corresponding move to the moves array\n  addNormalMoveSet(newPositions, startPos, pieceType, moves) {\n    let newPos;\n    let newMove;\n    let captType;\n\n    newPositions.forEach1Bit((pos) => {\n      captType = this.pieces[this.opp].hasSetBit(pos) ? this.getPieceAt(pos) : null;\n      moves.push(new Move(startPos, pos, MoveTypes.NORMAL, pieceType, captType));\n    });\n  }\n\n  // adds available castling moves to the moves array\n  addCastleMoves(moves) {\n    const turnCastleRights = this.getCastleRights(this.turn);\n    const startPos = King.INIT_POS[this.turn];\n    const notOccupied = this.getOccupied().not();\n\n    if ((turnCastleRights & 0b1) && King.canCastle(this.turn, Dirs.WEST, notOccupied)) {\n      moves.push(new Move(startPos, startPos - 2, MoveTypes.CSTL_QUEEN, PieceTypes.KINGS));\n    }\n\n    if ((turnCastleRights & 0b10) && King.canCastle(this.turn, Dirs.EAST, notOccupied)) {\n      moves.push(new Move(startPos, startPos + 2, MoveTypes.CSTL_KING, PieceTypes.KINGS));\n    }\n  }\n\n  // returns 2bit value for the color's castling rights\n  // left bit => king-side rights\n  // right bit => queen-side rights\n  getCastleRights(color) {\n    return color === Colors.WHITE ? this.castleRights & 0b11 : this.castleRights >>> 2;\n  }\n\n  // returns a BB with occupied positions for a given color and piece type\n  getColorPieceSet(color, pieceType) {\n    return this.pieces[color].and(this.pieces[pieceType]);\n  }\n\n  // returns a BB of all occupied positions\n  getOccupied() {\n    return this.pieces[Colors.WHITE].or(this.pieces[Colors.BLACK]);\n  }\n\n  // returns a BB of all positions that this color does not occupy\n  getNotOccupiedBy(color) {\n    return this.pieces[color].not();\n  }\n\n  // returns the piece type that occupies the given position\n  // if no piece is found, returns null\n  getPieceAt(pos) {\n    const types = Object.values(PieceTypes);\n\n    let idx;\n    let type;\n\n    for (idx = 0; idx < types.length; idx++) {\n      type = types[idx];\n      if (this.pieces[type].hasSetBit(pos)) {\n        return type;\n      }\n    }\n\n    return null;\n  }\n\n  // makes a specified move if it's legal, updating the current position\n  // returns true if the move is made, false otherwise\n  makeMove(move) {\n    const moveData = move.getData();\n\n    let isLegal;\n    this.testMove(moveData, (testsLegal) => {\n      isLegal = testsLegal;\n      return !isLegal;\n    });\n\n    if (!isLegal) { return false; }\n\n    this.addPrevState();\n\n    this.adjustCastleRights(moveData.pieceType, moveData.from);\n    this.epBB = new BitBoard();\n\n    this.execMoveType(moveData.from, moveData.to, moveData.type);\n\n    this.prevMoves.push(move);\n    this.swapTurn();\n\n    return true;\n  }\n\n  // makes the piece movements needed to determine\n  // if the move is legal, sends a boolean for the legality\n  // to the callback and undoes the piece movements if the callback\n  // returns true\n  testMove(moveData, cb) {\n    if (moveData.captPieceType) {\n      this.clearPieceAt(moveData.to, this.opp, moveData.captPieceType);\n    }\n\n    if (moveData.isPromo) {\n      this.clearPieceAt(moveData.from, this.turn, PieceTypes.PAWNS);\n    } else {\n      this.movePiece(moveData.from, moveData.to, this.turn, moveData.pieceType);\n    }\n\n    const undo = cb(this.testsLegal(moveData));\n    if (!undo) { return; }\n\n    if (moveData.isPromo) {\n      this.setPieceAt(moveData.from, this.turn, PieceTypes.PAWNS);\n    } else {\n      this.movePiece(moveData.to, moveData.from, this.turn, moveData.pieceType);\n    }\n\n    if (moveData.captPieceType) {\n      this.setPieceAt(moveData.to, this.opp, moveData.captPieceType);\n    }\n  }\n\n  // returns boolean for whether or not move is legal\n  // based on the current position\n  testsLegal(moveData) {\n    if (moveData.isCastle) {\n      return this.isLegalCastle(moveData.from, moveData.type);\n    } else {\n      return !this.inCheck(this.turn);\n    }\n  }\n\n  isLegalCastle(pos, castleType) {\n    const dir = castleType === MoveTypes.CSTL_KING ? 1 : -1;\n    let count = 0;\n\n    while (count <= 2) {\n      if (this.isAttacked(pos, this.turn)) { return false; }\n      count++;\n      pos += dir;\n    }\n\n    return true;\n  }\n\n  // returns boolean for whether the provided color's king is in check\n  inCheck(color) {\n    const kingPos = this.getColorPieceSet(color, PieceTypes.KINGS).bitScanForward();\n    return this.isAttacked(kingPos, color);\n  }\n\n\n  // returns boolean for whether any opponent color piece is attacking the provided position\n  isAttacked(pos, color) {\n    const posBB = BitBoard.fromPos(pos);\n    const occupied = this.getOccupied();\n    const oppColor = this.getOtherColor(color);\n    const pawns = this.getColorPieceSet(oppColor, PieceTypes.PAWNS);\n\n    return (!Pawns.attacksLeft(oppColor, pawns, posBB).isZero() ||\n            !Pawns.attacksRight(oppColor, pawns, posBB).isZero() ||\n            !Knight.moves(pos, this.getColorPieceSet(oppColor, PieceTypes.KNIGHTS)).isZero() ||\n            !Bishop.moves(pos, occupied, this.getColorPieceSet(oppColor, PieceTypes.BISHOPS)).isZero() ||\n            !Rook.moves(pos, occupied, this.getColorPieceSet(oppColor, PieceTypes.ROOKS)).isZero() ||\n            !Queen.moves(pos, occupied, this.getColorPieceSet(oppColor, PieceTypes.QUEENS)).isZero() ||\n            !King.moves(pos, this.getColorPieceSet(oppColor, PieceTypes.KINGS)).isZero());\n  }\n\n  // unmakes the previous move, updating the current position\n  unmakePrevMove() {\n    const prevMove = this.prevMoves.pop();\n    if (!prevMove) { return false; }\n    this.swapTurn();\n    const moveData = prevMove.getData();\n\n    this.reverseMoveType(moveData.from, moveData.to, moveData.type);\n\n    const prevState = this.prevStates.pop();\n    this.epBB = prevState.epBB;\n    this.castleRights = prevState.castleRights;\n\n    this.movePiece(moveData.to, moveData.from, this.turn, moveData.pieceType);\n\n    if (moveData.captPieceType) {\n      this.setPieceAt(moveData.to, this.opp, moveData.captPieceType);\n    }\n\n    return true;\n  }\n\n  // makes adjustments to the castling rights\n  // if a rook or king is moved\n  adjustCastleRights(pieceType, from) {\n    if (pieceType === PieceTypes.KINGS) {\n      let clearCastleRightsMask = this.turn === Colors.WHITE ? 0b1100 : 0b11;\n      this.castleRights &= clearCastleRightsMask;\n    } else if (pieceType === PieceTypes.ROOKS) {\n      let clearCastlePos = 0;\n      if (from > King.INIT_POS[this.turn]) { clearCastlePos++; }\n      if (this.turn === Colors.BLACK) { clearCastlePos += 2; }\n      this.castleRights &= ~Math.pow(2, clearCastlePos);\n    }\n  }\n\n  // adds the current state values to the prevStates array\n  // used for move unmaking purposes\n  addPrevState() {\n    const state = { epBB: this.epBB, castleRights: this.castleRights };\n    this.prevStates.push(state);\n  }\n\n  // makes special adjustments to the position based on the move type\n  execMoveType(from, to, type) {\n    switch(type) {\n      case MoveTypes.NORMAL:\n        return;\n      case MoveTypes.DBL_PPUSH:\n        let epPos = to + (-Pawns.DIRS[this.turn] * 8);\n        this.epBB = BitBoard.fromPos(epPos);\n        break;\n      case MoveTypes.CSTL_KING:\n        this.movePiece(from + 3, from + 1, this.turn, PieceTypes.ROOKS);\n        break;\n      case MoveTypes.CSTL_QUEEN:\n        this.movePiece(from - 4, from - 1, this.turn, PieceTypes.ROOKS);\n        break;\n      case MoveTypes.EP_CAPT:\n        let capturedPos = to - (Pawns.DIRS[this.turn] * 8);\n        this.clearPieceAt(capturedPos, this.opp, PieceTypes.PAWNS);\n        break;\n      case MoveTypes.NPROMO:\n        this.setPieceAt(to, this.turn, PieceTypes.KNIGHTS);\n        break;\n      case MoveTypes.BPROMO:\n        this.setPieceAt(to, this.turn, PieceTypes.BISHOPS);\n        break;\n      case MoveTypes.RPROMO:\n        this.setPieceAt(to, this.turn, PieceTypes.ROOKS);\n        break;\n      case MoveTypes.QPROMO:\n        this.setPieceAt(to, this.turn, PieceTypes.QUEENS);\n        break;\n    }\n  }\n\n  // unmakes special adjustments to the position based on the move type\n  reverseMoveType(from, to, type) {\n    switch(type) {\n      case MoveTypes.NORMAL:\n      case MoveTypes.DBL_PPUSH:\n        return;\n      case MoveTypes.CSTL_KING:\n        this.movePiece(from + 1, from + 3, this.turn, PieceTypes.ROOKS);\n        break;\n      case MoveTypes.CSTL_QUEEN:\n        this.movePiece(from - 1, from - 4, this.turn, PieceTypes.ROOKS);\n        break;\n      case MoveTypes.EP_CAPT:\n        let capturedPos = to - (Pawns.DIRS[this.turn] * 8);\n        this.setPieceAt(capturedPos, this.opp, PieceTypes.PAWNS);\n        break;\n      case MoveTypes.NPROMO:\n        this.clearPieceAt(to, this.turn, PieceTypes.KNIGHTS);\n        break;\n      case MoveTypes.BPROMO:\n        this.clearPieceAt(to, this.turn, PieceTypes.BISHOPS);\n        break;\n      case MoveTypes.RPROMO:\n        this.clearPieceAt(to, this.turn, PieceTypes.ROOKS);\n        break;\n      case MoveTypes.QPROMO:\n        this.clearPieceAt(to, this.turn, PieceTypes.QUEENS);\n        break;\n    }\n  }\n\n  // moves piece from one position to another\n  movePiece(from, to, color, pieceType) {\n    this.clearPieceAt(from, color, pieceType);\n    this.setPieceAt(to, color, pieceType);\n  }\n\n  // marks the given color and pieceType BBs as occupied at the specified position\n  setPieceAt(pos, color, pieceType) {\n    this.pieces[color].setBit(pos);\n    this.pieces[pieceType].setBit(pos);\n  }\n\n  // marks the given color and pieceType BBs as unoccupied at the specified position\n  clearPieceAt(pos, color, pieceType) {\n    this.pieces[color].clearBit(pos);\n    this.pieces[pieceType].clearBit(pos);\n  }\n\n  // renders BBs for all piece sets\n  renderPieceSets() {\n    Object.keys(this.pieces).forEach((boardType) => {\n      console.log(boardType);\n      this.pieces[boardType].render();\n    });\n  }\n\n  getBoardArr() {\n    return pieceSetsToArray(this.pieces);\n  }\n\n  // renders the board for the current position\n  renderBoardArr() {\n    const boardArr = pieceSetsToArray(this.pieces);\n\n    let pos;\n    let rowStr = '';\n    console.log(\"\\n\");\n    for (pos = 63; pos >= 0; pos--) {\n      rowStr = boardArr[pos] + rowStr;\n      if (pos % 8 === 0) {\n        console.log(rowStr);\n        rowStr = '';\n      }\n    }\n    console.log(\"\\n\");\n  }\n}\n\nmodule.exports = Position;\n\n\n\n// WEBPACK FOOTER //\n// ./js/position/index.js","function popCount32(int) {\n  let count = 0;\n\n  while (int) {\n    count++;\n    int &= (int - 1);\n  }\n\n  return count;\n}\n\nfunction bitScanForward32(int) {\n  return popCount32((int & -int) - 1);\n}\n\nfunction generateMSBTable(max) {\n  let res = [];\n  let int;\n  for (int = 1; int <= max; int++) {\n    res[int] = Math.floor(Math.log2(int));\n  }\n\n  return res;\n}\n\nconst mostSigBitTable = generateMSBTable(255);\n\nfunction bitScanReverse32(int) {\n  let res = 0;\n  if (int > 0xFFFF) {\n    int >>>= 16;\n    res += 16;\n  }\n\n  if (int > 0xFF) {\n    int >>>= 8;\n    res += 8;\n  }\n\n  return res + mostSigBitTable[int];\n}\n\nfunction clearLeastSigBit32(int) {\n  return (int & (int - 1));\n}\n\nmodule.exports = {\n  popCount32,\n  bitScanForward32,\n  bitScanReverse32,\n  clearLeastSigBit32\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/bitboard/utils.js","const BitBoard = require('./bitboard.js');\n\n// this file includes static sets of bitboards that\n// are commonly used throughout the program\n\nconst FULL_BOARD = new BitBoard().not();\n\nconst COLS = function() {\n  let colIdx = 0;\n  let cols = [];\n  while (colIdx < 8) {\n    cols.push(BitBoard.fromCol(colIdx));\n    colIdx++;\n  }\n\n  return cols;\n}();\n\n\nconst ROWS = function() {\n  let rowIdx = 0;\n  let rows = [];\n  while (rowIdx < 8) {\n    rows.push(BitBoard.fromRow(rowIdx));\n    rowIdx++;\n  }\n\n  return rows;\n}();\n\n\nconst DIAGS = function() {\n  const diags = [];\n  let pos = 56;\n\n  while (pos >= 0) {\n    diags.push(BitBoard.upperRightDiag(pos));\n    pos -= 8;\n  }\n\n  pos = 1;\n\n  while (pos < 8) {\n    diags.push(BitBoard.upperRightDiag(pos));\n    pos++;\n  }\n\n  return diags;\n}();\n\n\nconst ANTI_DIAGS = function() {\n  const antiDiags = [];\n  let pos = 0;\n\n  while (pos < 8) {\n    antiDiags.push(BitBoard.upperLeftDiag(pos));\n    pos++;\n  }\n\n  pos = 15;\n  while (pos < 64) {\n    antiDiags.push(BitBoard.upperLeftDiag(pos));\n    pos += 8;\n  }\n\n  return antiDiags;\n}();\n\nconst NORTH_OF_ROW = function() {\n  const res = [];\n  let bb = FULL_BOARD;\n  let idx = 0;\n\n  while (idx <= 7) {\n    bb = bb.xor(ROWS[idx]);\n    res.push(bb);\n    idx++;\n  }\n\n  return res;\n}();\n\nconst SOUTH_OF_ROW = function() {\n  const res = [];\n  let bb = new BitBoard();\n  let idx = 0;\n\n  while (idx <= 7) {\n    res.push(bb);\n    bb = bb.or(ROWS[idx]);\n    idx++;\n  }\n\n  return res;\n}();\n\nconst EAST_OF_COL = function() {\n  const res = [];\n  let bb = FULL_BOARD;\n  let idx = 0;\n\n  while (idx <= 7) {\n    bb = bb.xor(COLS[idx]);\n    res.push(bb);\n    idx++;\n  }\n\n  return res;\n}();\n\nconst WEST_OF_COL = function() {\n  const res = [];\n  let bb = new BitBoard();\n  let idx = 0;\n\n  while (idx <= 7) {\n    res.push(bb);\n    bb = bb.or(COLS[idx]);\n    idx++;\n  }\n\n  return res;\n}();\n\nmodule.exports = {\n  FULL_BOARD,\n  COLS,\n  ROWS,\n  DIAGS,\n  ANTI_DIAGS,\n  NORTH_OF_ROW,\n  SOUTH_OF_ROW,\n  EAST_OF_COL,\n  WEST_OF_COL\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/bitboard/masks.js","const { Types } = require('./constants.js');\n\nclass Move {\n  constructor(from, to, type, piece, captPiece) {\n    this.val = (((type & 0xf) << 18) >>> 0) |\n               ((((captPiece || 0) & 0x7) << 15) >>> 0) |\n               (((piece & 0x7) << 12) >>> 0) |\n               (((from & 0x3f) << 6) >>> 0) |\n               ((to & 0x3f) >>> 0) >>> 0;\n  }\n\n  getData() {\n    return {\n      from: this.getFrom(),\n      to: this.getTo(),\n      type: this.getType(),\n      pieceType: this.getPiece(),\n      captPieceType: this.getCaptPiece(),\n      isPromo: this.isPromo(),\n      isCastle: this.isCastle()\n    };\n  }\n\n  getFrom() {\n    return (this.val >>> 6) & 0x3f;\n  }\n\n  getTo() {\n    return this.val & 0x3f;\n  }\n\n  getPiece() {\n    return (this.val >>> 12) & 0x7;\n  }\n\n  getCaptPiece() {\n    return (this.val >>> 15) & 0x7;\n  }\n\n  getType() {\n    return this.val >>> 18;\n  }\n\n  isPromo() {\n    return [Types.NPROMO, Types.BPROMO,\n            Types.RPROMO, Types.QPROMO].includes(this.getType());\n  }\n\n  isCastle() {\n    return [Types.CSTL_KING, Types.CSTL_QUEEN].includes(this.getType());\n  }\n}\n\nmodule.exports = { Move, MoveTypes: Types };\n\n\n\n// WEBPACK FOOTER //\n// ./js/move/index.js","// https://www.chessprogramming.org/Encoding_Moves#From-To_Based\n// require('../string_contants.js');\n\nconst typesArr = ['NORMAL', 'DBL_PPUSH',\n                  'CSTL_KING', 'CSTL_QUEEN',\n                  'EP_CAPT', 'NPROMO',\n                  'BPROMO','RPROMO', 'QPROMO'];\n\nconst Types = typesArr.reduce((res, type, idx) => {\n  res[type] = idx;\n  return res;\n}, {});\n\nmodule.exports = { Types };\n\n\n\n// WEBPACK FOOTER //\n// ./js/move/constants.js","const stepMove = require('./movements/step_move.js');\nconst { BBMasks } = require('../bitboard');\nconst { Colors } = require('./constants.js');\n\nconst DIRS = {\n  [Colors.WHITE]: 1,\n  [Colors.BLACK]: -1\n};\n\nconst INIT_MASKS = {\n  [Colors.WHITE]: BBMasks.ROWS[1],\n  [Colors.BLACK]: BBMasks.ROWS[6]\n};\n\nconst Pawns = {\n  value: 1,\n  DIRS,\n  PROMO_MASKS: { [Colors.WHITE]: BBMasks.ROWS[7],\n                 [Colors.BLACK]: BBMasks.ROWS[0]\n               },\n  attacksLeft: (color, positions, oppPieces) => {\n    return stepMove(positions, DIRS[color], -DIRS[color]).and(oppPieces);\n  },\n  attacksRight: (color, positions, oppPieces) => {\n    return stepMove(positions, DIRS[color], DIRS[color]).and(oppPieces);\n  },\n  singlePush: (color, positions, notOccupied) => {\n    return stepMove(positions, DIRS[color], 0).and(notOccupied);\n  },\n  doublePush: (color, positions, notOccupied) => {\n    const onePush = stepMove(positions.and(INIT_MASKS[color]), DIRS[color], 0).and(notOccupied);\n    return stepMove(onePush, DIRS[color], 0).and(notOccupied);\n  }\n};\n\nmodule.exports = Pawns;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/pawns.js","const { KNIGHT_MOVES } = require('./movements/masks.js');\n\nconst Knight = {\n  value: 3,\n  moves: (position, notOwnPieces) => {\n    return KNIGHT_MOVES[position].and(notOwnPieces);\n  }\n};\n\nmodule.exports = Knight;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/knight.js","const { diag } = require('./movements/slide_moves.js');\n\nconst Bishop = {\n  value: 3,\n  moves: (position, occupied, notOwnPieces) => {\n    return diag(position, occupied, notOwnPieces);\n  }\n};\n\nmodule.exports = Bishop;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/bishop.js","const { horizVert } = require('./movements/slide_moves.js');\n\nconst Rook = {\n  value: 5,\n  moves: (position, occupied, notOwnPieces) => {\n    return horizVert(position, occupied, notOwnPieces);\n  },\n};\n\nmodule.exports = Rook;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/rook.js","const { diag, horizVert } = require('./movements/slide_moves.js');\n\nconst Queen = {\n  value: 9,\n  moves: (position, occupied, notOwnPieces) => {\n    return diag(position, occupied, notOwnPieces).or(horizVert(position, occupied, notOwnPieces));\n  }\n};\n\nmodule.exports = Queen;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/queen.js","const { BBMasks } = require('../bitboard');\nconst Dirs = require('./movements/dir_constants.js');\nconst { KING_MOVES, SLIDE_MOVES } = require('./movements/masks.js');\nconst { Colors } = require('./constants.js');\n\nconst INIT_POS = {\n  [Colors.BLACK]: 60,\n  [Colors.WHITE]: 4\n};\n\n// const CastleDirs = {\n//   [Dirs.EAST]: 1,\n//   [Dirs.WEST]: -1\n// };\n\nconst King = {\n  value: 100,\n  INIT_POS,\n  moves: (position, notOwnPieces) => {\n    return KING_MOVES[position].and(notOwnPieces);\n  },\n  canCastle: (color, dir, notOccupied) => {\n    const castleSlide = SLIDE_MOVES[INIT_POS[color]][dir].and(notOccupied);\n    if (dir === Dirs.EAST) {\n      return castleSlide.popCount() === 2;\n    } else {\n      return castleSlide.popCount() === 3;\n    }\n  }\n};\n\nmodule.exports = King;\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/king.js","const { Types, Colors, PieceTypeLetters } = require('./constants.js');\n\nfunction pieceToLetter(type, color) {\n  if (color === Colors.WHITE) { return PieceTypeLetters[type]; }\n  else { return PieceTypeLetters[type].toUpperCase(); }\n}\n\nfunction letterToColor(letter) {\n  return letter.toUpperCase() === letter ? Colors.BLACK : Colors.WHITE;\n}\n\nfunction letterToType(letter) {\n  const pieceTypes = Object.values(Types);\n  let pieceType;\n  let idx;\n\n  for (idx = 0; idx < pieceTypes.length; idx++) {\n    if (PieceTypeLetters[pieceTypes[idx]] === letter.toLowerCase()) {\n      pieceType = pieceTypes[idx];\n      break;\n    }\n  }\n\n  return pieceType;\n}\n\nmodule.exports = { pieceToLetter, letterToColor, letterToType };\n\n\n\n// WEBPACK FOOTER //\n// ./js/pieces/conversions.js","const { PieceConv, PieceTypes, Colors } = require('../../pieces');\nconst { BitBoard } = require('../../bitboard');\n\nconst xx = \"_\";\n\nconst WP = PieceConv.pieceToLetter(PieceTypes.PAWNS, Colors.WHITE);\nconst WN = PieceConv.pieceToLetter(PieceTypes.KNIGHTS, Colors.WHITE);\nconst WB = PieceConv.pieceToLetter(PieceTypes.BISHOPS, Colors.WHITE);\nconst WR = PieceConv.pieceToLetter(PieceTypes.ROOKS, Colors.WHITE);\nconst WQ = PieceConv.pieceToLetter(PieceTypes.QUEENS, Colors.WHITE);\nconst WK = PieceConv.pieceToLetter(PieceTypes.KINGS, Colors.WHITE);\n\nconst BP = PieceConv.pieceToLetter(PieceTypes.PAWNS, Colors.BLACK);\nconst BN = PieceConv.pieceToLetter(PieceTypes.KNIGHTS, Colors.BLACK);\nconst BB = PieceConv.pieceToLetter(PieceTypes.BISHOPS, Colors.BLACK);\nconst BR = PieceConv.pieceToLetter(PieceTypes.ROOKS, Colors.BLACK);\nconst BQ = PieceConv.pieceToLetter(PieceTypes.QUEENS, Colors.BLACK);\nconst BK = PieceConv.pieceToLetter(PieceTypes.KINGS, Colors.BLACK);\n\n\nconst defaultBoardArr = [\nWR, WN, WB, WQ, WK, WB, WN, WR,\nWP, WP, WP, WP, WP, WP, WP, WP,\nxx, xx, xx, xx, xx, xx, xx, xx,\nxx, xx, xx, xx, xx, xx, xx, xx,\nxx, xx, xx, xx, xx, xx, xx, xx,\nxx, xx, xx, xx, xx, xx, xx, xx,\nBP, BP, BP, BP, BP, BP, BP, BP,\nBR, BN, BB, BQ, BK, BB, BN, BR\n];\n\nfunction createEmptyBoardArr() {\n  const res = [];\n\n  let count = 0;\n  while (count <= 64) {\n    res.push(xx);\n    count++;\n  }\n\n  return res;\n}\n\nfunction pieceSetsToArray(pieces) {\n  const res = createEmptyBoardArr();\n\n  const pieceTypes = Object.values(PieceTypes);\n  pieceTypes.forEach((type) => {\n    pieces[type].forEach1Bit((pos) => {\n      if (pieces[Colors.WHITE].hasSetBit(pos)) {\n        res[pos] = PieceConv.pieceToLetter(type, Colors.WHITE);\n      } else {\n        res[pos] = PieceConv.pieceToLetter(type, Colors.BLACK);\n      }\n    });\n  });\n\n  return res;\n}\n\nfunction pieceSetsFromArray(array = defaultBoardArr) {\n  const pieces = {};\n\n  Object.values(PieceTypes).forEach((type) => {\n    pieces[type] = new BitBoard();\n  });\n\n  Object.values(Colors).forEach((color) => {\n    pieces[color] = new BitBoard();\n  });\n\n\n  let pos;\n  let type;\n  let color;\n  for (pos = 0; pos < array.length; pos++) {\n    if (array[pos] !== xx) {\n      type = PieceConv.letterToType(array[pos]);\n      color = PieceConv.letterToColor(array[pos]);\n      pieces[type].setBit(pos);\n      pieces[color].setBit(pos);\n    }\n  }\n\n  return pieces;\n}\n\nmodule.exports = { pieceSetsToArray, pieceSetsFromArray };\n\n\n\n// WEBPACK FOOTER //\n// ./js/position/utils/array_conversions.js","class AI {\n  constructor() {\n\n  }\n\n  reset() {\n\n  }\n\n  makeMove(position, moves) {\n    const chosen = moves[Math.floor(moves.length * Math.random())];\n    position.makeMove(chosen);\n  }\n}\n\nmodule.exports = AI;\n\n\n\n// WEBPACK FOOTER //\n// ./js/ai/index.js","const { ColsFiles, FilesCols,\n        RowsRanks, RanksRows} = require('./constants.js');\n\nfunction posFromFileRank(fileRank) {\n  const [file, rank] = fileRank.split('');\n  return (RanksRows[rank] * 8) + FilesCols[file];\n}\n\nfunction fileRankFromPos(pos) {\n  return ColsFiles[pos % 8] + (RowsRanks[Math.floor(pos / 8)]);\n}\n\n// if the row and col are either both even or both odd\nfunction isDarkSquare(fileRank) {\n  const [file, rank] = fileRank.split('');\n  const row = RanksRows[rank];\n  const col = FilesCols[file];\n  return (row % 2 === 0 && col % 2 === 0) ||\n         (row % 2 === 1 && col % 2 === 1);\n}\n\nmodule.exports = {\n  posFromFileRank,\n  fileRankFromPos,\n  isDarkSquare\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/ui/util.js"],"sourceRoot":""}